<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Конфигуратор клавиатуры</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; background: #f9f9f9; }
  h1 { text-align: center; margin-bottom: 30px; color: #333; }
  .menu {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-bottom: 30px;
  }
  .menu button {
    flex: 1 1 150px;
    padding: 15px;
    font-size: 18px;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    color: white;
    font-weight: bold;
    transition: background-color 0.3s ease;
  }
  .menu button.keycaps { background: linear-gradient(45deg, #6a11cb, #2575fc); }
  .menu button.switches { background: linear-gradient(45deg, #f7971e, #ffd200); color: #333; }
  .menu button.bases { background: linear-gradient(45deg, #11998e, #38ef7d); }
  .menu button:hover { filter: brightness(1.1); }

  /* Секция с сетками */
  .block {
    display: none;
    margin-bottom: 40px;
  }
  .block.active { display: block; }

  .grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
  }
  .item {
    position: relative;
    background: white;
    border-radius: 8px;
    overflow: hidden;
    cursor: pointer;
    box-shadow: 0 2px 5px rgb(0 0 0 / 0.1);
    transition: transform 0.2s ease;
  }
  .item:hover { transform: scale(1.05); }
  .item img {
    width: 100%;
    display: block;
    border-bottom: 1px solid #ddd;
    aspect-ratio: 1 / 1;
    object-fit: contain;
    background: #fafafa;
  }
  .price-tag {
    position: absolute;
    top: 6px;
    right: 6px;
    background: rgba(0,0,0,0.7);
    color: white;
    font-size: 14px;
    padding: 3px 7px;
    border-radius: 5px;
    user-select: none;
  }

  /* Модальное окно */
  .modal {
    display: none;
    position: fixed;
    top:0; left:0; width:100%; height:100%;
    background: rgba(0,0,0,0.6);
    justify-content: center;
    align-items: center;
    z-index: 10000;
  }
  .modal.active {
    display: flex;
  }
  .modal-content {
    background: white;
    border-radius: 12px;
    max-width: 480px;
    width: 90%;
    padding: 25px;
    position: relative;
    box-shadow: 0 10px 40px rgb(0 0 0 / 0.3);
    text-align: center;
  }
  .modal-content img {
    max-width: 100%;
    border-radius: 10px;
  }
  .modal-close {
    position: absolute;
    top: 12px;
    right: 16px;
    font-weight: bold;
    font-size: 24px;
    cursor: pointer;
    color: #666;
  }
  .modal-price {
    margin-top: 15px;
    font-weight: 700;
    font-size: 20px;
    color: #333;
  }
  .modal-desc {
    margin-top: 8px;
    font-size: 14px;
    color: #555;
    min-height: 40px;
  }
  .modal-extra {
    margin-top: 10px;
    font-size: 14px;
    color: #444;
    text-align: left;
  }
  .btn-add {
    margin-top: 20px;
    background: #2575fc;
    color: white;
    border: none;
    padding: 12px 24px;
    font-size: 16px;
    font-weight: bold;
    border-radius: 8px;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  .btn-add:hover {
    background: #1a53d1;
  }

  /* Итоговый заказ */
  #order-summary {
    background: white;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 3px 10px rgb(0 0 0 / 0.1);
    max-width: 600px;
    margin: 0 auto 40px;
  }
  #order-summary h3 {
    margin-bottom: 15px;
    color: #333;
    text-align: center;
  }
  #order-items {
    display: flex;
    justify-content: space-around;
    margin-bottom: 15px;
  }
  #order-items img {
    width: 120px;
    height: 120px;
    border-radius: 10px;
    object-fit: contain;
    border: 1px solid #ddd;
  }
  #order-total {
    font-weight: 700;
    font-size: 22px;
    text-align: center;
    margin-bottom: 15px;
  }

  /* Доставка и оплата */
  #delivery-payment {
    max-width: 600px;
    margin: 0 auto 30px;
    background: white;
    padding: 15px 20px;
    border-radius: 12px;
    box-shadow: 0 3px 10px rgb(0 0 0 / 0.1);
    font-size: 16px;
    color: #333;
  }
  #delivery-payment label {
    display: block;
    margin-bottom: 8px;
  }
  #delivery-payment select,
  #delivery-payment input[type="radio"] {
    margin-right: 10px;
    cursor: pointer;
  }
  #delivery-payment .payment-methods {
    margin-top: 10px;
  }
  #delivery-payment .payment-methods label {
    display: inline-block;
    margin-right: 20px;
    font-weight: normal;
  }
</style>
</head>
<body>

<h1>Конфигуратор кастомной клавиатуры</h1>

<!-- Главное меню -->
<div class="menu">
  <button class="keycaps" data-block="keycaps-block">Кейкапы</button>
  <button class="switches" data-block="switches-block">Свитчи</button>
  <button class="bases" data-block="bases-block">Основы</button>
</div>

<!-- Блоки с сетками -->
<div id="keycaps-block" class="block"></div>
<div id="switches-block" class="block"></div>
<div id="bases-block" class="block"></div>

<!-- Итоговый заказ -->
<div id="order-summary">
  <h3>Ваш заказ</h3>
  <div id="order-items">
    <div><img id="order-keycap" src="" alt="Кейкап"></div>
    <div><img id="order-switch" src="" alt="Свитч"></div>
    <div><img id="order-base" src="" alt="Основа"></div>
  </div>
  <div id="order-total">Итог: 0 ₽</div>
</div>

<!-- Доставка и оплата -->
<div id="delivery-payment">
  <label for="delivery">Выберите доставку:</label>
  <select id="delivery" aria-label="Выберите доставку">
    <option value="300">Доставка СДЭК из СПб — 300 ₽</option>
    <option value="500">Доставка курьером — 500 ₽</option>
    <option value="0">Самовывоз — бесплатно</option>
  </select>

  <div class="payment-methods">
    <label>Способ оплаты:</label>
    <label><input type="radio" name="payment" value="crypto" checked> Криптовалюта</label>
    <label><input type="radio" name="payment" value="sbp"> СБП</label>
  </div>
</div>

<!-- Модальное окно -->
<div id="modal" class="modal" aria-modal="true" role="dialog" aria-labelledby="modal-title">
  <div class="modal-content">
    <span id="modal-close" class="modal-close" role="button" aria-label="Закрыть окно">&times;</span>
    <img id="modal-img" src="" alt="Изображение"/>
    <div id="modal-price" class="modal-price"></div>
    <div id="modal-desc" class="modal-desc"></div>
    <div id="modal-extra" class="modal-extra"></div>
    <button id="modal-add-btn" class="btn-add">Добавить в клавиатуру</button>
  </div>
</div>

<script>
  // Данные (заглушки, заменяй на свои картинки и параметры)
  const data = {
    keycaps: [
      {id:1, img:"https://i.imgur.com/1.png", price:1200, desc:"Красивый кейкап #1"},
      {id:2, img:"https://i.imgur.com/2.png", price:1500, desc:"Красивый кейкап #2"},
      {id:3, img:"https://i.imgur.com/3.png", price:1300, desc:"Красивый кейкап #3"},
      {id:4, img:"https://i.imgur.com/4.png", price:1100, desc:"Красивый кейкап #4"},
      {id:5, img:"https://i.imgur.com/5.png", price:1400, desc:"Красивый кейкап #5"},
      {id:6, img:"https://i.imgur.com/6.png", price:1600, desc:"Красивый кейкап #6"},
      {id:7, img:"https://i.imgur.com/7.png", price:1250, desc:"Красивый кейкап #7"},
      {id:8, img:"https://i.imgur.com/8.png", price:1350, desc:"Красивый кейкап #8"},
      {id:9, img:"https://i.imgur.com/9.png", price:1450, desc:"Красивый кейкап #9"},
    ],
    switches: [
      {id:1, img:"https://i.imgur.com/a1.png", price:500, sound:"https://actions.google.com/sounds/v1/door/door_knock_1.ogg", desc:"Свитч #1"},
      {id:2, img:"https://i.imgur.com/a2.png", price:600, sound:"https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg", desc:"Свитч #2"},
      {id:3, img:"https://i.imgur.com/a3.png", price:550, sound:"https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg", desc:"Свитч #3"},
      {id:4, img:"https://i.imgur.com/a4.png", price:530, sound:"https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg", desc:"Свитч #4"},
      {id:5, img:"https://i.imgur.com/a5.png", price:580, sound:"https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg", desc:"Свитч #5"},
      {id:6, img:"https://i.imgur.com/a6.png", price:520, sound:"https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg", desc:"Свитч #6"},
      {id:7, img:"https://i.imgur.com/a7.png", price:540, sound:"https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg", desc:"Свитч #7"},
      {id:8, img:"https://i.imgur.com/a8.png", price:590, sound:"https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg", desc:"Свитч #8"},
      {id:9, img:"https://i.imgur.com/a9.png", price:600, sound:"https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg", desc:"Свитч #9"},
    ],
    bases: [
      {id:1, img:"https://i.imgur.com/b1.png", price:7000, material:"Алюминий", os:"Windows, Mac", connection:"Проводное", battery:"—", desc:"Основa #1"},
      {id:2, img:"https://i.imgur.com/b2.png", price:7500, material:"Пластик", os:"Windows", connection:"Беспроводное", battery:"3000mAh", desc:"Основa #2"},
      {id:3, img:"https://i.imgur.com/b3.png", price:7200, material:"Дерево", os:"Mac", connection:"Проводное", battery:"—", desc:"Основa #3"},
      {id:4, img:"https://i.imgur.com/b4.png", price:8000, material:"Алюминий", os:"Windows, Mac", connection:"Беспроводное", battery:"4000mAh", desc:"Основa #4"},
      {id:5, img:"https://i.imgur.com/b5.png", price:6800, material:"Пластик", os:"Windows", connection:"Проводное", battery:"—", desc:"Основa #5"},
      {id:6, img:"https://i.imgur.com/b6.png", price:6900, material:"Дерево", os:"Mac", connection:"Беспроводное", battery:"3500mAh", desc:"Основa #6"},
      {id:7, img:"https://i.imgur.com/b7.png", price:7300, material:"Пластик", os:"Windows, Mac", connection:"Проводное", battery:"—", desc:"Основa #7"},
      {id:8, img:"https://i.imgur.com/b8.png", price:7100, material:"Алюминий", os:"Windows", connection:"Беспроводное", battery:"3200mAh", desc:"Основa #8"},
      {id:9, img:"https://i.imgur.com/b9.png", price:7400, material:"Дерево", os:"Mac", connection:"Проводное", battery:"—", desc:"Основa #9"},
    ]
  };

  // Элементы DOM
  const blocks = {
    keycaps: document.getElementById("keycaps-block"),
    switches: document.getElementById("switches-block"),
    bases: document.getElementById("bases-block")
  };
  const modal = document.getElementById("modal");
  const modalImg = document.getElementById("modal-img");
  const modalPrice = document.getElementById("modal-price");
  const modalDesc = document.getElementById("modal-desc");
  const modalExtra = document.getElementById("modal-extra");
  const modalAddBtn = document.getElementById("modal-add-btn");
  const modalClose = document.getElementById("modal-close");

  // Заказ
  let order = {
    keycap: null,
    switch: null,
    base: null,
    deliveryCost: 300,
    paymentMethod: "crypto"
  };

  // Итоговые элементы
  const orderKeycapImg = document.getElementById("order-keycap");
  const orderSwitchImg = document.getElementById("order-switch");
  const orderBaseImg = document.getElementById("order-base");
  const orderTotal = document.getElementById("order-total");

  // Функция рендера сетки товаров
  function renderGrid(category) {
    const container = blocks[category];
    container.innerHTML = ""; // очистить
    container.style.display = "grid";
    container.classList.add("grid");
    data[category].forEach(item => {
      const div = document.createElement("div");
      div.className = "item";
      div.innerHTML = `
        <img src="${item.img}" alt="${item.desc}" />
        <div class="price-tag">${item.price} ₽</div>
      `;
      div.onclick = () => openModal(item, category);
      container.appendChild(div);
    });
  }

  // Открыть модалку с деталями
  function openModal(item, category) {
    modal.style.display = "flex";
    modalImg.src = item.img;
    modalPrice.textContent = `Цена: ${item.price} ₽`;
    modalDesc.textContent = item.desc;
    modalExtra.innerHTML = "";

    if(category === "bases") {
      modalExtra.innerHTML = `
        <div><b>Материал:</b> ${item.material}</div>
        <div><b>Поддержка ОС:</b> ${item.os}</div>
        <div><b>Подключение:</b> ${item.connection}</div>
        <div><b>Аккумулятор:</b> ${item.battery}</div>
      `;
    }

    modalAddBtn.onclick = () => {
      addToOrder(category, item);
      modal.style.display = "none";
    };

    if(category === "switches" && item.sound) {
      const audio = new Audio(item.sound);
      audio.play();
    }
  }

  // Добавить в заказ
  function addToOrder(category, item) {
    if(category === "keycaps") order.keycap = item;
    else if(category === "switches") order.switch = item;
    else if(category === "bases") order.base = item;
    updateOrderSummary();
  }

  // Обновить отображение заказа
  function updateOrderSummary() {
    orderKeycapImg.src = order.keycap ? order.keycap.img : "";
    orderSwitchImg.src = order.switch ? order.switch.img : "";
    orderBaseImg.src = order.base ? order.base.img : "";

    const sum = (order.keycap?.price || 0) + (order.switch?.price || 0) + (order.base?.price || 0) + order.deliveryCost;
    orderTotal.textContent = `Итог: ${sum} ₽`;
  }

  // Обработчики меню
  document.querySelectorAll(".menu button").forEach(btn => {
    btn.addEventListener("click", () => {
      // Скрыть все блоки
      Object.values(blocks).forEach(b => b.style.display = "none");
      // Показать нужный
      const blockId = btn.dataset.block;
      const cat = blockId.split("-")[0];
      if(blocks[cat].children.length === 0) {
        renderGrid(cat);
      }
      blocks[cat].style.display = "grid";
    });
  });

  // Обработчик закрытия модалки
  modalClose.onclick = () => {
    modal.style.display = "none";
  };
  window.onclick = e => {
    if(e.target === modal) modal.style.display = "none";
  };

  // Доставка
  const deliverySelect = document.getElementById("delivery");
  deliverySelect.addEventListener("change", e => {
    order.deliveryCost = +e.target.value;
    updateOrderSummary();
  });

  // Оплата
  document.querySelectorAll('input[name="payment"]').forEach(radio => {
    radio.addEventListener("change", e => {
      order.paymentMethod = e.target.value;
    });
  });

  // Инициализация
  updateOrderSummary();
</script>

</body>
</html>
