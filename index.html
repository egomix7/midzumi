<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä –∫–∞—Å—Ç–æ–º–Ω–æ–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã</title>
<style>
  /* ====== –ë–ê–ó–ê ====== */
  :root{
    --bg: #0f172a;           /* slate-900 */
    --card: #0b1224;         /* –≥–ª—É–±–æ–∫–∏–π —Ç—ë–º–Ω—ã–π */
    --muted: #94a3b8;        /* slate-400 */
    --text: #e2e8f0;         /* slate-200 */
    --accent: #34d399;       /* emerald-400 */
    --accent-2: #10b981;     /* emerald-500 */
    --accent-3: #22c55e;     /* green-500 */
    --ring: #86efac55;       /* green ring */
    --shadow: 0 10px 30px rgba(0,0,0,.35);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
    background:
      radial-gradient(1200px 600px at 20% -10%, #052e1d55, transparent 60%),
      radial-gradient(1000px 600px at 120% 10%, #0b3b2a55, transparent 60%),
      var(--bg);
    color: var(--text);
  }
  h1{
    text-align:center;
    font-weight:800;
    letter-spacing:.2px;
    margin:22px 12px 10px;
    font-size: clamp(22px, 4vw, 34px);
  }
  .sub{
    text-align:center;
    color: var(--muted);
    margin-bottom: 14px;
    font-size: 14px;
  }

  /* ====== –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ (–∫–Ω–æ–ø–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π) ====== */
  .menu{
    display:flex;
    gap:10px;
    padding: 0 12px 10px;
    max-width: 1100px;
    margin: 0 auto;
  }
  .menu .card-btn{
    flex:1 1 0;
    display:flex; align-items:center; gap:12px;
    padding:14px 16px;
    border-radius:16px;
    border:1px solid #1f2937;
    background:
      linear-gradient(180deg, rgba(34,197,94,.12), rgba(16,185,129,.06));
    color:#ecfeff;
    cursor:pointer;
    box-shadow: inset 0 0 0 1px #1b2b22, 0 6px 18px rgba(0,0,0,.25);
    transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease;
  }
  .menu .card-btn:hover{
    transform: translateY(-2px);
    border-color: #14532d;
    box-shadow: inset 0 0 0 1px #1b2b22, 0 12px 30px rgba(0,0,0,.3);
  }
  .menu .icon{
    width:38px; height:38px; border-radius:12px;
    display:grid; place-items:center;
    font-size:20px;
    background: radial-gradient(60% 60% at 30% 20%, #22c55e, #16a34a);
    box-shadow: inset 0 0 12px #052e1d, 0 4px 10px rgba(0,0,0,.4);
  }
  .menu .label{font-weight:700}
  .menu .hint{font-size:12px; color: #a7f3d0}

  /* ====== –ë–õ–û–ö–ò-–°–ï–¢–ö–ò ====== */
  .block{
    display:none;
    max-width:1100px;
    margin: 0 auto 18px;
    padding: 10px 12px 0;
    animation: fadeIn .25s ease;
  }
  @keyframes fadeIn{from{opacity:0; transform: translateY(6px)} to{opacity:1; transform:none}}

  .grid{
    display:grid;
    grid-template-columns: repeat(3, 1fr);
    gap:12px;
  }
  @media (max-width: 760px){
    .grid{ grid-template-columns: repeat(2, 1fr); }
  }

  .item{
    position:relative;
    background: linear-gradient(180deg, #0b1224, #0b1326);
    border:1px solid #172036;
    border-radius:16px;
    overflow:hidden;
    cursor:pointer;
    box-shadow: var(--shadow);
    transition: transform .18s ease, border-color .18s ease, box-shadow .18s ease;
  }
  .item:hover{
    transform: translateY(-3px);
    border-color:#1f513a;
    box-shadow: 0 16px 36px rgba(0,0,0,.45);
  }
  .item img{
    width:100%;
    aspect-ratio: 1/1;
    object-fit:contain;
    display:block;
    background: radial-gradient(500px 300px at 50% 10%, #0f2d2055, transparent 60%);
    border-bottom:1px solid #111827;
  }
  .price-tag{
    position:absolute; top:8px; right:8px;
    background: linear-gradient(180deg, #16a34a, #065f46);
    color:#eaffef;
    font-weight:700;
    font-size:12px;
    padding:4px 8px;
    border-radius:999px;
    box-shadow: 0 4px 10px rgba(0,0,0,.35);
  }
  .caption{
    padding:10px 12px;
    font-size:13px;
    color:#cbd5e1;
    min-height: 44px;
  }

  /* ====== –ö–û–†–ó–ò–ù–ê & –û–ü–õ–ê–¢–ê ====== */
  .panel-row{
    display:grid;
    grid-template-columns: 1.2fr .8fr;
    gap:12px;
    padding: 0 12px 24px;
    max-width:1100px;
    margin: 0 auto;
  }
  @media (max-width: 920px){
    .panel-row{ grid-template-columns: 1fr; }
  }

  .panel{
    background: linear-gradient(180deg, #0b1224, #0b1326);
    border:1px solid #172036;
    border-radius:18px;
    padding:16px;
    box-shadow: var(--shadow);
  }
  .panel h3{
    margin:2px 0 14px;
    font-size:18px;
    letter-spacing:.2px;
  }

  /* –ö–æ—Ä–∑–∏–Ω–∞ */
  #order-items{
    display:flex; gap:12px; justify-content:space-between; flex-wrap: wrap;
  }
  .slot{
    flex:1 1 30%;
    min-width: 140px;
    background: #0a1121;
    border:1px dashed #1f2937;
    border-radius:14px;
    padding:10px;
    text-align:center;
  }
  .slot img{
    width:100%; height:120px; object-fit:contain;
    border-radius:12px;
    background: radial-gradient(400px 220px at 50% 0%, #0f2d2055, transparent 60%);
    border:1px solid #0b162d;
  }
  .slot .name{ margin-top:8px; font-size:13px; color:#cbd5e1 }
  .slot .price{ margin-top:2px; font-weight:700; color:#86efac }

  .total{
    margin-top:14px;
    display:flex; align-items:center; justify-content:space-between; gap:10px;
    padding-top:10px; border-top:1px solid #12203a;
  }
  .sum{
    font-size:18px; font-weight:800;
    color:#bbf7d0;
  }
  .clear-btn{
    background: transparent; color:#94a3b8; border:1px solid #334155;
    padding:8px 12px; border-radius:10px; cursor:pointer;
  }
  .clear-btn:hover{ border-color:#64748b; color:#e2e8f0 }

  /* –î–æ—Å—Ç–∞–≤–∫–∞ –∏ –æ–ø–ª–∞—Ç–∞ */
  .field{margin-bottom:12px}
  .field label{display:block; margin-bottom:6px; color:#a7f3d0; font-size:14px}
  select, .radios{
    width:100%;
    background:#0a1121; color:#e2e8f0;
    border:1px solid #1f2937; border-radius:12px;
    padding:12px;
    outline:none;
    box-shadow: 0 0 0 0 var(--ring);
    transition: box-shadow .15s ease, border-color .15s ease;
  }
  select:focus{ box-shadow: 0 0 0 4px var(--ring); border-color:#14532d }
  .radios{
    display:flex; gap:12px; align-items:center; padding:10px 12px; flex-wrap:wrap;
  }
  .radios label{display:flex; gap:8px; align-items:center; background:#0b1425; padding:8px 10px; border-radius:10px; border:1px solid #1f2937;}
  .radios input{accent-color:#22c55e}

  /* ====== –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û ====== */
  .modal{
    display:none; position:fixed; inset:0; z-index:1000;
    background: rgba(0,0,0,.55);
    backdrop-filter: blur(6px);
    align-items:center; justify-content:center;
    padding: 16px;
  }
  .modal-content{
    width:min(92vw, 520px);
    background: linear-gradient(180deg, #0b1224, #0b1326);
    color: var(--text);
    border:1px solid #17324c;
    border-radius:18px;
    padding: 16px;
    box-shadow: 0 20px 60px rgba(0,0,0,.55);
    position:relative;
  }
  .modal-close{
    position:absolute; top:10px; right:12px;
    width:36px; height:36px; border-radius:10px;
    display:grid; place-items:center;
    background:#0a1121; color:#cbd5e1; border:1px solid #1f2937; cursor:pointer;
  }
  .modal-img-wrap{ position:relative; overflow:hidden; border-radius:14px; border:1px solid #0f2139 }
  .modal-img{ width:100%; display:block; background:#071122; max-height: 54vh; object-fit: contain }

  .nav{
    position:absolute; inset:0; display:flex; justify-content:space-between; align-items:center; pointer-events:none;
  }
  .nav button{
    pointer-events:auto;
    width:40px; height:40px; border-radius:999px;
    background: #0b162d99; color:#e2e8f0; border:1px solid #1e293b; cursor:pointer;
    display:grid; place-items:center; font-size:18px;
  }
  .nav .left{ margin-left:8px }
  .nav .right{ margin-right:8px }

  .modal-price{ margin:10px 2px 6px; font-weight:800; color:#86efac; font-size:18px }
  .modal-desc{ color:#cbd5e1; font-size:14px; margin-bottom:8px; min-height: 38px }
  .modal-extra{ color:#a7f3d0; font-size:13px; display:grid; gap:6px; }
  .sound-btn{
    margin-top:8px;
    background: linear-gradient(180deg, #22c55e, #16a34a);
    color:#052e1d; border:none; border-radius:12px;
    padding:10px 14px; font-weight:800; cursor:pointer;
  }
  .btn-add{
    margin-top:12px;
    width:100%;
    background: linear-gradient(180deg, #34d399, #10b981);
    color:#052e1d; border:none; border-radius:12px;
    padding:12px 16px; font-weight:900; letter-spacing:.2px; cursor:pointer;
    box-shadow: 0 8px 20px rgba(34,197,94,.25);
  }
  .btn-add:hover{ filter: brightness(1.05) }

  /* ====== –£–¢–ò–õ–ò–¢–´ ====== */
  .hidden{display:none !important;}

  /* –ú–æ–±–∏–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è */
  @media (max-width:540px){
    .menu{ flex-direction:column }
    .menu .card-btn{ padding:14px 14px }
    .slot img{ height:96px }
  }
</style>
</head>
<body>

<h1>–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä –∫–∞—Å—Ç–æ–º–Ω–æ–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã</h1>
<div class="sub">–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–º–ø–ª–µ–∫—Ç—É—é—â–∏–µ, –ø—Ä–æ—Å–ª—É—à–∞–π—Ç–µ –∑–≤—É–∫ —Å–≤–∏—Ç—á–µ–π –∏ –æ—Ñ–æ—Ä–º–∏—Ç–µ –∑–∞–∫–∞–∑</div>

<!-- ====== –ú–ï–ù–Æ –ö–ê–¢–ï–ì–û–†–ò–ô ====== -->
<div class="menu" role="navigation" aria-label="–ö–∞—Ç–µ–≥–æ—Ä–∏–∏">
  <button class="card-btn keycaps" data-block="keycaps-block" aria-controls="keycaps-block" aria-expanded="false">
    <div class="icon">‚å®Ô∏è</div>
    <div>
      <div class="label">–ö–µ–π–∫–∞–ø—ã</div>
      <div class="hint">6 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ ‚Ä¢ —Å–ª–∞–π–¥–µ—Ä —Ñ–æ—Ç–æ</div>
    </div>
  </button>
  <button class="card-btn switches" data-block="switches-block" aria-controls="switches-block" aria-expanded="false">
    <div class="icon">üéß</div>
    <div>
      <div class="label">–°–≤–∏—Ç—á–∏</div>
      <div class="hint">6 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ ‚Ä¢ –∑–≤—É–∫</div>
    </div>
  </button>
  <button class="card-btn bases" data-block="bases-block" aria-controls="bases-block" aria-expanded="false">
    <div class="icon">üß±</div>
    <div>
      <div class="label">–û—Å–Ω–æ–≤—ã</div>
      <div class="hint">6 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ ‚Ä¢ —Å–ª–∞–π–¥–µ—Ä —Ñ–æ—Ç–æ</div>
    </div>
  </button>
</div>

<!-- ====== –ë–õ–û–ö–ò-–°–ï–¢–ö–ò ====== -->
<section id="keycaps-block" class="block" aria-label="–ö–µ–π–∫–∞–ø—ã"></section>
<section id="switches-block" class="block" aria-label="–°–≤–∏—Ç—á–∏"></section>
<section id="bases-block"   class="block" aria-label="–û—Å–Ω–æ–≤—ã"></section>

<!-- ====== –ö–û–†–ó–ò–ù–ê + –î–û–°–¢–ê–í–ö–ê & –û–ü–õ–ê–¢–ê ====== -->
<div class="panel-row">
  <section class="panel" aria-label="–ö–æ—Ä–∑–∏–Ω–∞">
    <h3>–í–∞—à–∞ –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è</h3>
    <div id="order-items">
      <div class="slot" id="slot-keycap">
        <img id="order-keycap" src="" alt="–ö–µ–π–∫–∞–ø"/>
        <div class="name" id="name-keycap">–ö–µ–π–∫–∞–ø –Ω–µ –≤—ã–±—Ä–∞–Ω</div>
        <div class="price" id="price-keycap"></div>
      </div>
      <div class="slot" id="slot-switch">
        <img id="order-switch" src="" alt="–°–≤–∏—Ç—á"/>
        <div class="name" id="name-switch">–°–≤–∏—Ç—á –Ω–µ –≤—ã–±—Ä–∞–Ω</div>
        <div class="price" id="price-switch"></div>
      </div>
      <div class="slot" id="slot-base">
        <img id="order-base" src="" alt="–û—Å–Ω–æ–≤–∞"/>
        <div class="name" id="name-base">–û—Å–Ω–æ–≤–∞ –Ω–µ –≤—ã–±—Ä–∞–Ω–∞</div>
        <div class="price" id="price-base"></div>
      </div>
    </div>
    <div class="total">
      <button class="clear-btn" id="clear-all" type="button">–û—á–∏—Å—Ç–∏—Ç—å –≤—ã–±–æ—Ä</button>
      <div class="sum" id="order-total">–ò—Ç–æ–≥: 0 ‚ÇΩ</div>
    </div>
  </section>

  <section class="panel" aria-label="–î–æ—Å—Ç–∞–≤–∫–∞ –∏ –æ–ø–ª–∞—Ç–∞">
    <h3>–î–æ—Å—Ç–∞–≤–∫–∞ –∏ –æ–ø–ª–∞—Ç–∞</h3>
    <div class="field">
      <label for="delivery">–°–ø–æ—Å–æ–± –¥–æ—Å—Ç–∞–≤–∫–∏</label>
      <select id="delivery" aria-label="–°–ø–æ—Å–æ–± –¥–æ—Å—Ç–∞–≤–∫–∏">
        <option value="300">–°–î–≠–ö (–∏–∑ –°–ü–±) ‚Äî 300 ‚ÇΩ</option>
        <option value="500">–ö—É—Ä—å–µ—Ä ‚Äî 500 ‚ÇΩ</option>
        <option value="0">–°–∞–º–æ–≤—ã–≤–æ–∑ ‚Äî –±–µ—Å–ø–ª–∞—Ç–Ω–æ</option>
      </select>
    </div>
    <div class="field">
      <label>–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã</label>
      <div class="radios" role="radiogroup" aria-label="–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã">
        <label><input type="radio" name="payment" value="crypto" checked/> –ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞</label>
        <label><input type="radio" name="payment" value="sbp"/> –°–ë–ü</label>
        <label><input type="radio" name="payment" value="card"/> –ë–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞</label>
      </div>
    </div>
  </section>
</div>

<!-- ====== –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û ====== -->
<div id="modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="m-title">
  <div class="modal-content">
    <button id="modal-close" class="modal-close" aria-label="–ó–∞–∫—Ä—ã—Ç—å">‚úï</button>

    <div class="modal-img-wrap">
      <img id="modal-img" class="modal-img" src="" alt="–§–æ—Ç–æ —Ç–æ–≤–∞—Ä–∞"/>
      <div class="nav">
        <button class="left"  id="nav-left"  aria-label="–ü—Ä–µ–¥—ã–¥—É—â–µ–µ —Ñ–æ—Ç–æ">‚ùÆ</button>
        <button class="right" id="nav-right" aria-label="–°–ª–µ–¥—É—é—â–µ–µ —Ñ–æ—Ç–æ">‚ùØ</button>
      </div>
    </div>

    <div id="modal-price" class="modal-price"></div>
    <div id="modal-desc"  class="modal-desc"></div>
    <div id="modal-extra" class="modal-extra"></div>
    <button id="modal-add-btn" class="btn-add">–î–æ–±–∞–≤–∏—Ç—å –≤ —Å–±–æ—Ä–∫—É</button>
  </div>
</div>

<script>
/* ===================== –î–ê–ù–ù–´–ï (6 –Ω–∞ –±–ª–æ–∫) ===================== */
const data = {
  keycaps: [
    {id:1, images:["https://i.imgur.com/1.png","https://i.imgur.com/2.png","https://i.imgur.com/3.png"], price:1200, desc:"–ö–µ–π–∫–∞–ø #1 ‚Äî –¥–≤–æ–π–Ω–æ–π –ª–∏—Ç—å—ë PBT"},
    {id:2, images:["https://i.imgur.com/4.png","https://i.imgur.com/5.png","https://i.imgur.com/6.png"], price:1300, desc:"–ö–µ–π–∫–∞–ø #2 ‚Äî –ø—Ä–æ—Ñ–∏–ª—å Cherry"},
    {id:3, images:["https://i.imgur.com/7.png","https://i.imgur.com/8.png","https://i.imgur.com/9.png"], price:1400, desc:"–ö–µ–π–∫–∞–ø #3 ‚Äî –º–∞—Ç–æ–≤–∞—è –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å"},
    {id:4, images:["https://i.imgur.com/10.png","https://i.imgur.com/11.png","https://i.imgur.com/12.png"], price:1250, desc:"–ö–µ–π–∫–∞–ø #4 ‚Äî –ª–µ–≥–µ–Ω–¥—ã MG"},
    {id:5, images:["https://i.imgur.com/13.png","https://i.imgur.com/14.png","https://i.imgur.com/15.png"], price:1350, desc:"–ö–µ–π–∫–∞–ø #5 ‚Äî –ø–æ–¥—Å–≤–µ—Ç–∫–∞ RGB shine-through"},
    {id:6, images:["https://i.imgur.com/16.png","https://i.imgur.com/17.png","https://i.imgur.com/18.png"], price:1450, desc:"–ö–µ–π–∫–∞–ø #6 ‚Äî –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è —Å–µ—Ä–∏—è"}
  ],
  switches: [
    {id:1, img:"https://i.imgur.com/a1.png", price:500, sound:"https://actions.google.com/sounds/v1/door/door_knock_1.ogg", desc:"–°–≤–∏—Ç—á #1 ‚Äî –ª–∏–Ω–µ–π–Ω—ã–π 45g"},
    {id:2, img:"https://i.imgur.com/a2.png", price:600, sound:"https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg", desc:"–°–≤–∏—Ç—á #2 ‚Äî —Ç–∞–∫—Ç–∏–ª—å–Ω—ã–π 55g"},
    {id:3, img:"https://i.imgur.com/a3.png", price:550, sound:"https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg", desc:"–°–≤–∏—Ç—á #3 ‚Äî –∫–ª–∏–∫–∏ 60g"},
    {id:4, img:"https://i.imgur.com/a4.png", price:530, sound:"https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg", desc:"–°–≤–∏—Ç—á #4 ‚Äî –ª–∏–Ω–µ–π–Ω—ã–π 50g"},
    {id:5, img:"https://i.imgur.com/a5.png", price:580, sound:"https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg", desc:"–°–≤–∏—Ç—á #5 ‚Äî —Ç–∞–∫—Ç–∏–ª—å–Ω—ã–π 62g"},
    {id:6, img:"https://i.imgur.com/a6.png", price:520, sound:"https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg", desc:"–°–≤–∏—Ç—á #6 ‚Äî —Ç–∏—Ö–∏–π –ª–∏–Ω–µ–π–Ω—ã–π"}
  ],
  bases: [
    {id:1, images:["https://i.imgur.com/b1.png","https://i.imgur.com/b2.png","https://i.imgur.com/b3.png"], price:7000, material:"–ê–ª—é–º–∏–Ω–∏–π", os:"Windows, Mac", connection:"–ü—Ä–æ–≤–æ–¥–Ω–æ–µ",   battery:"‚Äî",       desc:"–û—Å–Ω–æ–≤–∞ #1 ‚Äî TKL –∫–æ—Ä–ø—É—Å"},
    {id:2, images:["https://i.imgur.com/b4.png","https://i.imgur.com/b5.png","https://i.imgur.com/b6.png"], price:7500, material:"–ü–ª–∞—Å—Ç–∏–∫",  os:"Windows",     connection:"–ë–µ—Å–ø—Ä–æ–≤–æ–¥–Ω–æ–µ", battery:"3000mAh", desc:"–û—Å–Ω–æ–≤–∞ #2 ‚Äî –ø–æ–ª–Ω–æ—Ä–∞–∑–º–µ—Ä"},
    {id:3, images:["https://i.imgur.com/b7.png","https://i.imgur.com/b8.png","https://i.imgur.com/b9.png"], price:7200, material:"–î–µ—Ä–µ–≤–æ",   os:"Mac",         connection:"–ü—Ä–æ–≤–æ–¥–Ω–æ–µ",   battery:"‚Äî",       desc:"–û—Å–Ω–æ–≤–∞ #3 ‚Äî 65% –∫–æ–º–ø–∞–∫—Ç"},
    {id:4, images:["https://i.imgur.com/b10.png","https://i.imgur.com/b11.png","https://i.imgur.com/b12.png"], price:8000, material:"–ê–ª—é–º–∏–Ω–∏–π", os:"Windows, Mac", connection:"–ë–µ—Å–ø—Ä–æ–≤–æ–¥–Ω–æ–µ", battery:"4000mAh", desc:"–û—Å–Ω–æ–≤–∞ #4 ‚Äî 75% –≥–æ—Ä—è—á–∞—è –∑–∞–º–µ–Ω–∞"},
    {id:5, images:["https://i.imgur.com/b13.png","https://i.imgur.com/b14.png","https://i.imgur.com/b15.png"], price:6800, material:"–ü–ª–∞—Å—Ç–∏–∫",  os:"Windows",     connection:"–ü—Ä–æ–≤–æ–¥–Ω–æ–µ",   battery:"‚Äî",       desc:"–û—Å–Ω–æ–≤–∞ #5 ‚Äî –±—é–¥–∂–µ—Ç–Ω—ã–π –∫–µ–π—Å"},
    {id:6, images:["https://i.imgur.com/b16.png","https://i.imgur.com/b17.png","https://i.imgur.com/b18.png"], price:6900, material:"–î–µ—Ä–µ–≤–æ",   os:"Mac",         connection:"–ë–µ—Å–ø—Ä–æ–≤–æ–¥–Ω–æ–µ", battery:"3500mAh", desc:"–û—Å–Ω–æ–≤–∞ #6 ‚Äî –≤–∏–Ω—Ç–∞–∂ —Å—Ç–∏–ª—å"}
  ]
};

/* ===================== DOM ===================== */
const blocks = {
  keycaps: document.getElementById('keycaps-block'),
  switches: document.getElementById('switches-block'),
  bases: document.getElementById('bases-block')
};

const modal      = document.getElementById('modal');
const modalImg   = document.getElementById('modal-img');
const modalPrice = document.getElementById('modal-price');
const modalDesc  = document.getElementById('modal-desc');
const modalExtra = document.getElementById('modal-extra');
const modalAdd   = document.getElementById('modal-add-btn');
const modalClose = document.getElementById('modal-close');
const navLeft    = document.getElementById('nav-left');
const navRight   = document.getElementById('nav-right');

const orderImgs = {
  keycap: document.getElementById('order-keycap'),
  switch: document.getElementById('order-switch'),
  base:   document.getElementById('order-base')
};
const orderNames  = {
  keycap: document.getElementById('name-keycap'),
  switch: document.getElementById('name-switch'),
  base:   document.getElementById('name-base')
};
const orderPrices = {
  keycap: document.getElementById('price-keycap'),
  switch: document.getElementById('price-switch'),
  base:   document.getElementById('price-base')
};
const orderTotalEl = document.getElementById('order-total');

const deliverySelect = document.getElementById('delivery');
const paymentRadios  = document.querySelectorAll('input[name="payment"]');
const clearAllBtn    = document.getElementById('clear-all');

/* ===================== STATE ===================== */
let order = {
  keycap: null,
  switch: null,
  base:   null,
  deliveryCost: Number(deliverySelect.value || 300),
  paymentMethod: 'crypto'
};

let currentCategory = '';
let currentItem = null;
let currentImages = [];
let currentIndex = 0;

/* ===================== –†–ï–ù–î–ï–† –°–ï–¢–û–ö ===================== */
function renderGrid(category){
  const container = blocks[category];
  container.innerHTML = '';
  container.classList.add('grid');

  data[category].slice(0,6).forEach(item => {
    const tile = document.createElement('div');
    tile.className = 'item';
    const imgSrc = item.images ? item.images[0] : item.img;
    tile.innerHTML = `
      <span class="price-tag">${item.price.toLocaleString('ru-RU')} ‚ÇΩ</span>
      <img src="${imgSrc}" alt="${item.desc}">
      <div class="caption">${item.desc}</div>
    `;
    tile.addEventListener('click', () => openModal(item, category));
    container.appendChild(tile);
  });
}

/* ===================== –ú–û–î–ê–õ–ö–ê ===================== */
function openModal(item, category){
  currentCategory = category;
  currentItem = item;
  currentImages = item.images ? item.images.slice(0,3) : (item.img ? [item.img] : []);
  currentIndex = 0;

  modalImg.src = currentImages[0] || '';
  modalPrice.textContent = `–¶–µ–Ω–∞: ${item.price.toLocaleString('ru-RU')} ‚ÇΩ`;
  modalDesc.textContent  = item.desc || '';
  modalExtra.innerHTML   = '';

  // –î–æ–ø. –∏–Ω—Ñ–æ + –∫–Ω–æ–ø–∫–∞ –∑–≤—É–∫–∞
  if(category === 'bases'){
    modalExtra.innerHTML = `
      <div><b>–ú–∞—Ç–µ—Ä–∏–∞–ª:</b> ${item.material}</div>
      <div><b>–û–°:</b> ${item.os}</div>
      <div><b>–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:</b> ${item.connection}</div>
      <div><b>–ê–∫–∫—É–º—É–ª—è—Ç–æ—Ä:</b> ${item.battery}</div>
    `;
  }
  if(category === 'switches' && item.sound){
    const btn = document.createElement('button');
    btn.className = 'sound-btn';
    btn.type = 'button';
    btn.textContent = 'üîä –ü—Ä–æ–∏–≥—Ä–∞—Ç—å –∑–≤—É–∫';
    btn.addEventListener('click', () => {
      const audio = new Audio(item.sound);
      audio.play();
    });
    modalExtra.appendChild(btn);
  }

  // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–µ–ª–∫–∞–º–∏
  updateArrowsVisibility();
  modal.style.display = 'flex';

  // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∑–∞–∫–∞–∑
  modalAdd.onclick = () => {
    if(currentCategory === 'keycaps') order.keycap = currentItem;
    if(currentCategory === 'switches') order.switch = currentItem;
    if(currentCategory === 'bases')   order.base   = currentItem;
    updateOrderView();
    closeModal();
  };
}

function updateArrowsVisibility(){
  const multi = currentImages.length > 1;
  navLeft.style.visibility  = multi ? 'visible' : 'hidden';
  navRight.style.visibility = multi ? 'visible' : 'hidden';
}

function closeModal(){ modal.style.display = 'none'; }

navLeft.addEventListener('click', () => {
  if(currentImages.length > 1){
    currentIndex = (currentIndex - 1 + currentImages.length) % currentImages.length;
    modalImg.src = currentImages[currentIndex];
  }
});
navRight.addEventListener('click', () => {
  if(currentImages.length > 1){
    currentIndex = (currentIndex + 1) % currentImages.length;
    modalImg.src = currentImages[currentIndex];
  }
});
modalClose.addEventListener('click', closeModal);
window.addEventListener('click', (e) => { if(e.target === modal) closeModal(); });
window.addEventListener('keydown', (e) => {
  if(modal.style.display === 'flex'){
    if(e.key === 'Escape') closeModal();
    if(e.key === 'ArrowLeft')  navLeft.click();
    if(e.key === 'ArrowRight') navRight.click();
  }
});

/* ===================== –ó–ê–ö–ê–ó (–ö–û–†–ó–ò–ù–ê) ===================== */
function updateOrderView(){
  // –ö–∞—Ä—Ç–∏–Ω–∫–∏
  orderImgs.keycap.src = order.keycap ? (order.keycap.images ? order.keycap.images[0] : order.keycap.img) : '';
  orderImgs.switch.src = order.switch ? order.switch.img : '';
  orderImgs.base.src   = order.base   ? (order.base.images ? order.base.images[0] : order.base.img) : '';

  // –ù–∞–∑–≤–∞–Ω–∏—è
  orderNames.keycap.textContent = order.keycap ? order.keycap.desc : '–ö–µ–π–∫–∞–ø –Ω–µ –≤—ã–±—Ä–∞–Ω';
  orderNames.switch.textContent = order.switch ? order.switch.desc : '–°–≤–∏—Ç—á –Ω–µ –≤—ã–±—Ä–∞–Ω';
  orderNames.base.textContent   = order.base   ? order.base.desc   : '–û—Å–Ω–æ–≤–∞ –Ω–µ –≤—ã–±—Ä–∞–Ω–∞';

  // –¶–µ–Ω—ã –ø–æ–¥ —Å–ª–æ—Ç–æ–º
  orderPrices.keycap.textContent = order.keycap ? `${order.keycap.price.toLocaleString('ru-RU')} ‚ÇΩ` : '';
  orderPrices.switch.textContent = order.switch ? `${order.switch.price.toLocaleString('ru-RU')} ‚ÇΩ` : '';
  orderPrices.base.textContent   = order.base   ? `${order.base.price.toLocaleString('ru-RU')} ‚ÇΩ`   : '';

  // –ò—Ç–æ–≥
  const sum =
    (order.keycap?.price || 0) +
    (order.switch?.price || 0) +
    (order.base?.price   || 0) +
    (order.deliveryCost  || 0);
  orderTotalEl.textContent = `–ò—Ç–æ–≥: ${sum.toLocaleString('ru-RU')} ‚ÇΩ`;
}

clearAllBtn.addEventListener('click', () => {
  order.keycap = null;
  order.switch = null;
  order.base   = null;
  updateOrderView();
});

/* ===================== –ú–ï–ù–Æ –ö–ê–¢–ï–ì–û–†–ò–ô ===================== */
const menuButtons = document.querySelectorAll('.menu .card-btn');
menuButtons.forEach(btn => {
  btn.addEventListener('click', () => {
    // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –±–ª–æ–∫–æ–≤
    const id = btn.dataset.block; // e.g. keycaps-block
    const cat = id.split('-')[0];

    Object.values(blocks).forEach(b => b.style.display = 'none');
    const section = document.getElementById(id);
    if(section && section.children.length === 0){
      renderGrid(cat);
    }
    if(section){ section.style.display = 'block'; }

    // ARIA
    menuButtons.forEach(b => b.setAttribute('aria-expanded','false'));
    btn.setAttribute('aria-expanded','true');

    // –°–∫—Ä–æ–ª–ª –∫ –Ω–∞—á–∞–ª—É –±–ª–æ–∫–∞
    section?.scrollIntoView({behavior:'smooth', block:'start'});
  });
});

/* ===================== –î–û–°–¢–ê–í–ö–ê –ò –û–ü–õ–ê–¢–ê ===================== */
deliverySelect.addEventListener('change', (e) => {
  order.deliveryCost = Number(e.target.value || 0);
  updateOrderView();
});
paymentRadios.forEach(r => r.addEventListener('change', (e) => {
  if(e.target.checked) order.paymentMethod = e.target.value;
}));

/* ===================== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ===================== */
updateOrderView();
// –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–µ—Ä–≤—ã–π –±–ª–æ–∫ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞—Ö–æ–¥–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
// renderGrid('keycaps'); document.getElementById('keycaps-block').style.display='block';
</script>
</body>
</html>
